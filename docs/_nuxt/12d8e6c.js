(window.webpackJsonp=window.webpackJsonp||[]).push([[6,3],{288:function(t,e,n){var content=n(290);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(90).default)("77b8cffe",content,!0,{sourceMap:!1})},289:function(t,e,n){"use strict";n(288)},290:function(t,e,n){var r=n(89)(!1);r.push([t.i,'.note[data-v-7cd7898e]{height:100%;width:100%;display:flex;align-items:center;justify-content:center;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}span[data-v-7cd7898e]{color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}input[data-v-7cd7898e]{height:5rem;width:100%;text-align:center;color:#fff;background-color:transparent;border-width:2px;border-color:#fff}.note[data-v-7cd7898e]{font-size:3rem}@media (max-width:1199.98px){.note[data-v-7cd7898e]{font-size:2.4rem}}@media (max-width:991.98px){.note[data-v-7cd7898e]{font-size:1.8rem}}@media (max-width:767.98px){.note[data-v-7cd7898e]{font-size:1.2rem}}@media (max-width:575.98px){.note[data-v-7cd7898e]{font-size:1.8rem}}',""]),t.exports=r},293:function(t,e,n){var content=n(305);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(90).default)("0fc88b74",content,!0,{sourceMap:!1})},295:function(t,e,n){"use strict";n.r(e);n(14);var r=n(291),o={props:{edit:Boolean,note:{type:[String,Array],default:"C4"},color:{type:String,default:"cornflowerblue"},sustain:{type:Boolean,default:!1}},data:function(){return{internalnote:this.note}},computed:{notelabel:function(){if(Array.isArray(this.internalnote)){var t="",e=0;if(this.internalnote.length>=1&&(e=r.a(this.internalnote[0]).toMidi(),t+=this.internalnote[0].slice(0,-1)),this.internalnote.length>=3){var n=r.a(this.internalnote[1]).toMidi();r.a(this.internalnote[2]).toMidi()-e==6?t+="dim":n-e==3&&(t+="m")}if(this.internalnote.length>=4){var o=r.a(this.internalnote[3]).toMidi();o-e==11?t+="M7":o-e==10&&(t+="7")}return t}return this.internalnote}},watch:{note:function(t){this.internalnote=t}},methods:{playEmit:function(){this.$emit("play",this.internalnote)},attackEmit:function(){this.sustain?this.$emit("attack",this.internalnote):this.$emit("play",this.internalnote)},releaseEmit:function(){this.sustain&&this.$emit("release",this.internalnote)}}},l=(n(289),n(64)),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"note",style:{backgroundColor:t.color},on:{pointerdown:function(e){return t.attackEmit()},pointerleave:function(e){return t.releaseEmit()},pointerup:function(e){return t.releaseEmit()}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.edit,expression:"!edit"}]},[t._v(t._s(t.notelabel))]),t._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"},{name:"model",rawName:"v-model",value:t.internalnote,expression:"internalnote"}],attrs:{type:"text"},domProps:{value:t.internalnote},on:{click:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.internalnote=e.target.value)}}})])}),[],!1,null,"7cd7898e",null);e.default=component.exports},304:function(t,e,n){"use strict";n(293)},305:function(t,e,n){var r=n(89)(!1);r.push([t.i,'.body[data-v-3166875a]{height:100vh;width:100vw;display:flex;flex-flow:column;background-color:#d3d3d3}.header[data-v-3166875a]{display:flex;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;width:100%}.scale-container[data-v-3166875a]{flex-flow:column-reverse}.note-container[data-v-3166875a],.scale-container[data-v-3166875a]{height:100%;width:100%;display:flex}.note-container[data-v-3166875a]{flex-wrap:wrap;flex-flow:wrap-reverse}span[data-v-3166875a]{color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}Note[data-v-3166875a]{width:100%;height:100%}.header-item[data-v-3166875a]{height:100%;display:flex;align-items:center;justify-content:center;background-color:#708090}.header-item>span[data-v-3166875a]{display:flex;align-items:right;justify-content:flex-end;text-align:center}.edit[data-v-3166875a]{width:20%}.size-btn[data-v-3166875a]{width:5rem}.tr input[data-v-3166875a]{width:100%;height:100%;background-color:#708090;border:none;color:#fff;text-align:center}.tr input[data-v-3166875a]::-webkit-inner-spin-button,.tr input[data-v-3166875a]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.tr input[type=number][data-v-3166875a]{-moz-appearance:textfield}.tr[data-v-3166875a],.tr-btn[data-v-3166875a]{width:5rem}.tr-btn[data-v-3166875a]{background-color:#696969}.scale[data-v-3166875a]{background-color:#708090;display:flex;justify-content:flex-end;flex-grow:1}.note-set[data-v-3166875a],.scale span[data-v-3166875a]{width:100%}.note-set[data-v-3166875a]{height:100%;display:flex;flex-flow:column;flex-shrink:1}option[data-v-3166875a],select[data-v-3166875a]{background-color:#708090;color:#fff;text-align:right}select[data-v-3166875a]{height:100%;width:100%;max-width:20rem;border:none;outline:none;text-align:right}.header[data-v-3166875a],option[data-v-3166875a]{font-size:1.6rem}@media (max-width:1199.98px){.header[data-v-3166875a],option[data-v-3166875a]{font-size:1.3rem}}@media (max-width:991.98px){.header[data-v-3166875a],option[data-v-3166875a]{font-size:1rem}}@media (max-width:767.98px){.header[data-v-3166875a],option[data-v-3166875a]{font-size:1rem}}@media (max-width:575.98px){.header[data-v-3166875a],option[data-v-3166875a]{font-size:1rem}.scale-label.header-item[data-v-3166875a],.size-label[data-v-3166875a],.tr-label.header-item[data-v-3166875a]{display:none}}',""]),t.exports=r},308:function(t,e,n){"use strict";n.r(e);var r=n(27),o=(n(12),n(18),n(43),n(1),n(11),n(291)),l=["S","M","L"],c={a:0,s:1,d:2,f:3,g:4,h:5,j:6,k:7,l:8,";":9,":":10,"]":11},d={z:0,x:1,c:2,v:3,b:4,n:5,m:6,",":7,".":8,"/":9,"\\":10,shift:11},h={q:0,w:1,e:2,r:3,t:4,y:5,u:6,i:7,o:8,p:9,"@":10,"[":11},v=window.matchMedia("(max-width: 575.96px)"),f=window.matchMedia("(min-width: 576px)"),m={data:function(){var t=this;return{edit:!1,scaleid:0,rows:1,synth:(new o.b).toDestination(),sustain:!1,cycle:!0,transpose:0,colorList:Object(r.a)(Array(13).keys()).map((function(i){return t.hsv2rgb([30*i,.5,.8])})),sizeIndex:0}},computed:{notes:function(){var t=this;return this.$store.state.scaleList[this.scaleid].notes.filter((function(element,e,n){return!!t.cycle||e<n.length-1})).map((function(element){return t.transposenote(element,t.transpose)}))},revnotes:function(){var t=this,e=this.$store.state.scaleList[this.scaleid].revnotes;return null==e?null:e.filter((function(element,e,n){return!!t.cycle||e<n.length-1})).map((function(element){return t.transposenote(element,t.transpose)}))},type:function(){return this.$store.state.scaleList[this.scaleid].type||"SCALE"},size:function(){return l[this.sizeIndex]},octaves:function(){var t;switch(this.sizeIndex){case 0:t=[0];break;case 1:t=[0,1];break;case 2:t=[-1,0,1]}return t},colors:function(){var t=this;return this.$store.state.scaleList[this.scaleid].notes.map((function(element,e,n){return t.colorList[parseInt(12*e/(n.length-1))]})).map((function(t){return"rgb(".concat(t[0],", ").concat(t[1],", ").concat(t[2],")")}))},width:function(){var t=parseInt((this.$store.state.scaleList[this.scaleid].notes.length+this.rows-1)/this.rows)*this.rows;return 100*this.rows/t+"%"},height:function(){return 100/this.rows+"%"}},created:function(){v.addEventListener("change",this.handleMQChange),this.handleMQChange(v),f.addEventListener("change",this.handleRevMQChange),this.handleRevMQChange(f)},mounted:function(){window.addEventListener("keydown",this.keyplay)},methods:{toggle:function(t){var e=this.edit;this.edit=!e},handleMQChange:function(t){t.matches?this.rows=2:this.rows=1},handleRevMQChange:function(t){t.matches?this.rows=1:this.rows=2},resize:function(){this.sizeIndex=(this.sizeIndex+1)%3},decrement:function(){this.transpose--},increment:function(){this.transpose++},blur:function(t){t.target.blur()},play:function(t){this.synth.triggerAttackRelease(t,"8n")},attack:function(t){this.synth.triggerAttack(t,"8n")},release:function(t){var e=o.c();this.synth.triggerRelease(t,e+"8n",.5)},keyplay:function(t){var e=c[t.key];void 0!==e&&e<this.notes.length&&(t.ctrlKey?this.play(this.revnotes[e]):this.play(this.notes[e]));var n=d[t.key];void 0!==n&&n<this.notes.length&&(t.ctrlKey?this.play(this.transposenote(this.revnotes[n],-12)):this.play(this.transposenote(this.notes[n],-12)));var r=h[t.key];void 0!==r&&r<this.notes.length&&(t.ctrlKey?this.play(this.transposenote(this.revnotes[r],12)):this.play(this.transposenote(this.notes[r],12)))},transposenote:function(t,e){return Array.isArray(t)?t.map((function(element){return o.a(element).transpose(e).toNote()})):o.a(t).transpose(e).toNote()},transposenotes:function(t,e){var n=this;return t.map((function(t){return n.transposenote(t,12*e)}))},hsv2rgb:function(t){var e,n=t[0]/60,s=t[1],r=t[2];if(0===s)return[255*r,255*r,255*r];var i=parseInt(n),o=n-i,l=r*(1-s),c=r*(1-s*o),d=r*(1-s*(1-o));switch(i){case 0:case 6:e=[r,d,l];break;case 1:e=[c,r,l];break;case 2:e=[l,r,d];break;case 3:e=[l,c,r];break;case 4:e=[d,l,r];break;case 5:e=[r,l,c]}return e.map((function(t){return 255*t}))}}},w=(n(304),n(64)),component=Object(w.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"body"},[n("div",{staticClass:"header"},[t._m(0),t._v(" "),n("div",{staticClass:"size-btn header-item px-3",on:{click:function(e){return e.stopPropagation(),t.resize.apply(null,arguments)}}},[n("span",[t._v("\n        "+t._s(t.size)+"\n      ")])]),t._v(" "),t._m(1),t._v(" "),n("div",{staticClass:"tr-btn header-item px-3",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.decrement.apply(null,arguments)}}},[n("span",[t._v("\n        -\n      ")])]),t._v(" "),n("div",{staticClass:"tr header-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.transpose,expression:"transpose"}],attrs:{type:"number",min:"-36",max:"36"},domProps:{value:t.transpose},on:{input:function(e){e.target.composing||(t.transpose=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"tr-btn header-item px-3",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.increment.apply(null,arguments)}}},[n("span",[t._v("\n        +\n      ")])]),t._v(" "),n("div",{staticClass:"scale header-item"},[n("span",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.scaleid,expression:"scaleid"}],staticClass:"px-3 py-3 my-0",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.scaleid=e.target.multiple?n:n[0]},t.blur]}},t._l(t.$store.state.scaleList,(function(e,r){return n("option",{key:r,domProps:{value:r}},[t._v("\n            "+t._s(e.name)+"\n          ")])})),0)])]),t._v(" "),n("div",{staticClass:"scale-label header-item px-3"},[n("span",[t._v("\n        "+t._s(t.type)+"\n      ")])])]),t._v(" "),n("div",{staticClass:"scale-container"},t._l(t.octaves,(function(e){return n("div",{key:e,staticClass:"note-container"},t._l(t.transposenotes(t.notes,e),(function(r,o){return n("div",{key:o,staticClass:"note-set",style:{width:t.width,height:t.height}},[n("Note",{attrs:{edit:t.edit,note:r,color:t.colors[o],sustain:t.sustain},on:{attack:t.attack,release:t.release,play:t.play}}),t._v(" "),t.revnotes&&r!=t.transposenotes(t.revnotes,e)[o]?n("Note",{attrs:{edit:t.edit,note:t.transposenotes(t.revnotes,e)[o],color:t.colors[o],sustain:t.sustain},on:{attack:t.attack,release:t.release,play:t.play}}):t._e()],1)})),0)})),0)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"size-label header-item px-3"},[n("span",[t._v("\n        SIZE\n      ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tr-label header-item px-3"},[n("span",[t._v("\n        TRANSPOSE\n      ")])])}],!1,null,"3166875a",null);e.default=component.exports;installComponents(component,{Note:n(295).default})}}]);